<template>
  <div>
    <el-form ref="elForm" :model="formData" size="medium" label-width="100px">
      <table class="curr-table ">
        <tbody>
          <tr>
            <th width="10%">序号</th>
            <th width="20%">预计付款时间</th>
            <th width="25%">付款条件说明</th>
            <th width="15%">付款比例(%)</th>
            <th width="20%">应付金额(元)</th>
            <!-- <th width="10%">发票号</th>
            <th width="10%">发票含税金额</th>
            <th width="10%">发票代码</th>
            <th width="16%">发票时间</th> -->
            <th><el-button size="mini" type="success" @click="loadMore()" style="margin: 10px;">新增</el-button></th>
          </tr>
          <tr v-for="(value, index) in dataList" :key="index">
            <td>{{ index }}</td>
            <td>
              <el-date-picker
                v-model="value.estimateTime"
                format="yyyy-MM-dd"
                value-format="yyyy-MM-dd"
                :style="{ width: '100%' }"
                placeholder="请选择日期"
                clearable
              ></el-date-picker>
              <!-- <el-input
                   v-model="value.estimateTime"
                   :name="'appMateList[' + index + '].estimateTime'"
                 /> -->
            </td>
            <td><el-input v-model="value.conditionInfo" :name="'appMateList[' + index + '].conditionInfo'" /></td>
            <td><el-input v-model="value.paymentRatio" :name="'appMateList[' + index + '].paymentRatio'" v-on:input="changeNum(index)" oninput="value=value.replace(/[^0-9.]/g,'')" /></td>
            <td><el-input v-model="value.estimateMoney" :name="'appMateList[' + index + '].estimateMoney'" oninput="value=value.replace(/[^0-9.]/g,'')"/></td>
           <!-- <td><el-input v-model="value.invoiceId" :name="'appMateList[' + index + '].invoiceId'" /></td>
            <td><el-input v-model="value.invoiceMoney" :name="'appMateList[' + index + '].invoiceMoney'" /></td>
            <td><el-input v-model="value.invoiceCode" :name="'appMateList[' + index + '].invoiceCode'" /></td> -->
           <!-- <td>
              <el-date-picker
                v-model="value.invoiceTime"
                format="yyyy-MM-dd"
                value-format="yyyy-MM-dd"
                :style="{ width: '100%' }"
                placeholder="请选择日期"
                clearable
              ></el-date-picker>
            </td> -->
            <td><el-button size="mini" type="warning" @click.prevent="removeTodo(index)">删除</el-button></td>
            <td><el-input type="hidden" v-model="value.id" :name="'appMateList[' + index + '].id'" /></td>
          </tr>
        </tbody>
      </table>
    </el-form>
  </div>
</template>
<script>
export default {
  components: {},
  props: [],
  data() {
    return {
      formData: null,
      dataList: [],
      number: ''
    };
  },
  computed: {},
  watch: {},
  created() {},
  mounted() {},
  methods: {
    /** 添加行 **/
    loadMore: function() {
      this.dataList.push({
        id: null,
        estimateTime: null,
        conditionInfo: null,
        paymentRatio: null,
        estimateMoney: null,
        actualMoney: null,
        actualTime: null,
        invoiceId: null,
        invoiceMoney: null,
        invoiceCode: null,
        invoiceTime: null
      });
    },
    /** 删除行 **/
    removeTodo: function(index) {
      this.dataList.splice(index, 1);
    },

    changeNum(index) {
      this.dataList[index].estimateMoney = (this.dataList[index].paymentRatio / 100 * this.number).toFixed(2);
    }
  }
};
</script>
<style>
.curr-table {
  text-align: center;
  width: 100%;
  vertical-align: middle;
  border-spacing: 0px;
  border-style: none;
  border-collapse: collapse;
}
.curr-table td,
th {
  padding: 5px 10px;
}
.curr-table th {
  font-weight: bold;
  background-color: #eff3fa;
  height: 40px;
}
.mrg {
  margin: 10px 0;
}
</style>
